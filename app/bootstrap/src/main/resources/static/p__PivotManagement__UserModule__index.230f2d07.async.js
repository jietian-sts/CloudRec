(self.webpackChunk=self.webpackChunk||[]).push([[3748],{86615:function(K,B,e){"use strict";var a=e(1413),l=e(91),i=e(22270),d=e(78045),p=e(62435),R=e(90789),W=e(58055),Z=e(86074),U=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],f=p.forwardRef(function(E,u){var c=E.fieldProps,D=E.options,L=E.radioType,o=E.layout,t=E.proFieldProps,P=E.valueEnum,h=(0,l.Z)(E,U);return(0,Z.jsx)(W.Z,(0,a.Z)((0,a.Z)({valueType:L==="button"?"radioButton":"radio",ref:u,valueEnum:(0,i.h)(P,void 0)},h),{},{fieldProps:(0,a.Z)({options:D,layout:o},c),proFieldProps:t,filedConfig:{customLightMode:!0}}))}),O=p.forwardRef(function(E,u){var c=E.fieldProps,D=E.children;return(0,Z.jsx)(d.ZP,(0,a.Z)((0,a.Z)({},c),{},{ref:u,children:D}))}),g=(0,R.G)(O,{valuePropName:"checked",ignoreWidth:!0}),j=g;j.Group=f,j.Button=d.ZP.Button,j.displayName="ProFormComponent",B.Z=j},64317:function(K,B,e){"use strict";var a=e(1413),l=e(91),i=e(22270),d=e(62435),p=e(66758),R=e(58055),W=e(86074),Z=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],U=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(c,D){var L=c.fieldProps,o=c.children,t=c.params,P=c.proFieldProps,h=c.mode,r=c.valueEnum,$=c.request,V=c.showSearch,I=c.options,z=(0,l.Z)(c,Z),N=(0,d.useContext)(p.Z);return(0,W.jsx)(R.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,i.h)(r),request:$,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:I,mode:h,showSearch:V,getPopupContainer:N.getPopupContainer},L),ref:D,proFieldProps:P},z),{},{children:o}))},O=d.forwardRef(function(u,c){var D=u.fieldProps,L=u.children,o=u.params,t=u.proFieldProps,P=u.mode,h=u.valueEnum,r=u.request,$=u.options,V=(0,l.Z)(u,U),I=(0,a.Z)({options:$,mode:P||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},D),z=(0,d.useContext)(p.Z);return(0,W.jsx)(R.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,i.h)(h),request:r,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({getPopupContainer:z.getPopupContainer},I),ref:c,proFieldProps:t},V),{},{children:L}))}),g=d.forwardRef(f),j=O,E=g;E.SearchSelect=j,E.displayName="ProFormComponent",B.Z=E},5966:function(K,B,e){"use strict";var a=e(97685),l=e(1413),i=e(91),d=e(21770),p=e(23323),R=e(55241),W=e(98423),Z=e(62435),U=e(58055),f=e(86074),O=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],j="text",E=function(o){var t=o.fieldProps,P=o.proFieldProps,h=(0,i.Z)(o,O);return(0,f.jsx)(U.Z,(0,l.Z)({valueType:j,fieldProps:t,filedConfig:{valueType:j},proFieldProps:P},h))},u=function(o){var t=(0,d.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),P=(0,a.Z)(t,2),h=P[0],r=P[1];return(0,f.jsx)(p.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(V){var I,z=V.getFieldValue(o.name||[]);return(0,f.jsx)(R.Z,(0,l.Z)((0,l.Z)({getPopupContainer:function(C){return C&&C.parentNode?C.parentNode:C},onOpenChange:function(C){return r(C)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[(I=o.statusRender)===null||I===void 0?void 0:I.call(o,z),o.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},o.popoverProps),{},{open:h,children:o.children}))}})},c=function(o){var t=o.fieldProps,P=o.proFieldProps,h=(0,i.Z)(o,g),r=(0,Z.useState)(!1),$=(0,a.Z)(r,2),V=$[0],I=$[1];return t!=null&&t.statusRender&&h.name?(0,f.jsx)(u,{name:h.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:V,onOpenChange:I,children:(0,f.jsx)("div",{children:(0,f.jsx)(U.Z,(0,l.Z)({valueType:"password",fieldProps:(0,l.Z)((0,l.Z)({},(0,W.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(N){var C;t==null||(C=t.onBlur)===null||C===void 0||C.call(t,N),I(!1)},onClick:function(N){var C;t==null||(C=t.onClick)===null||C===void 0||C.call(t,N),I(!0)}}),proFieldProps:P,filedConfig:{valueType:j}},h))})}):(0,f.jsx)(U.Z,(0,l.Z)({valueType:"password",fieldProps:t,proFieldProps:P,filedConfig:{valueType:j}},h))},D=E;D.Password=c,D.displayName="ProFormComponent",B.Z=D},61188:function(K,B,e){"use strict";e.r(B),e.d(B,{default:function(){return pe}});var a=e(97857),l=e.n(a),i=e(15009),d=e.n(i),p=e(99289),R=e.n(p),W=e(5574),Z=e.n(W),U=e(53846),f=e(13769),O=e.n(f),g=e(98665),j=e(17910),E=e(37476),u=e(5966),c=e(64317),D=e(86615),L=e(92016),o=e(68872),t=e(23323),P=e(96486),h=e(62435),r=e(86074),$=["password","tenantIdList"],V=function(w){var k=(0,L.useModel)("tenant"),q=k.tenantListAll,ne=o.ZP.useMessage(),m=Z()(ne,2),Q=m[0],oe=m[1],ee=t.Z.useForm(),ae=Z()(ee,1),J=ae[0],x=(0,L.useIntl)(),Y=w.editFormVisible,s=w.userInfo,te=w.setEditFormVisible,b=w.tableActionRef,S=function(){var M=R()(d()().mark(function v(F){var T,G,y,H,le,_,re,ie;return d()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return T=F.password,G=F.tenantIdList,y=O()(F,$),H=l()(l()({},y),{},{status:(s==null?void 0:s.status)||"valid"}),s.id&&(H.id=s==null?void 0:s.id),(0,P.isEmpty)(G)||(H.tenantIds=(0,P.cloneDeep)(G).toString()),(0,P.isEmpty)(T)||(H.password=T),le=s.id?g.updateUser:g.createUser,X.next=8,le(H);case 8:_=X.sent,(_.msg==="success"||[200].includes(_.code))&&(s!=null&&s.id?Q.success(x.formatMessage({id:"common.message.text.edit.success"})):Q.success(x.formatMessage({id:"common.message.text.create.success"})),te(!1),(re=b.current)===null||re===void 0||(ie=re.reloadAndRest)===null||ie===void 0||ie.call(re));case 10:case"end":return X.stop()}},v)}));return function(F){return M.apply(this,arguments)}}();(0,h.useEffect)(function(){if(Y&&!(0,P.isEmpty)(s)){var M;if(!(0,P.isEmpty)(s==null?void 0:s.tenantIds)){var v;M=s==null||(v=s.tenantIds)===null||v===void 0||(v=v.split(","))===null||v===void 0?void 0:v.map(function(F){return Number(F)})}J.setFieldsValue(l()(l()({},s),{},{tenantIdList:M}))}},[Y,s]);var n=function(){J.resetFields()},A=function(){te(!1),n()};return(0,r.jsxs)(r.Fragment,{children:[oe,(0,r.jsxs)(E.Y,{title:s!=null&&s.id?x.formatMessage({id:"user.extend.title.edit"}):x.formatMessage({id:"user.extend.title.add"}),width:560,form:J,modalProps:{destroyOnClose:!0,onCancel:function(){return A()},styles:{body:{paddingTop:12}}},labelCol:{span:x.locale==="en-US"?6:4},wrapperCol:{span:x.locale==="en-US"?18:20},layout:"horizontal",open:Y,onFinish:S,children:[(0,r.jsx)(u.Z,{name:"userId",label:x.formatMessage({id:"user.module.title.user.id"}),rules:[{required:!0,message:x.formatMessage({id:"user.extend.userId.message"}),pattern:/^[a-zA-Z0-9_]{5,24}$/}],placeholder:x.formatMessage({id:"user.extend.userId.placeholder"}),fieldProps:{disabled:!!(s!=null&&s.id)}}),(0,r.jsx)(u.Z.Password,{name:"password",label:x.formatMessage({id:"user.module.title.user.password"}),rules:[{required:!(s!=null&&s.id)}]}),(0,r.jsx)(u.Z,{name:"username",label:x.formatMessage({id:"user.module.title.user.name"}),rules:[{required:!0}]}),(0,r.jsx)(c.Z,{name:"tenantIdList",label:x.formatMessage({id:"user.extend.text.tenant"}),options:q,mode:"multiple"}),(0,r.jsx)(D.Z.Group,{name:"roleName",label:x.formatMessage({id:"user.module.title.user.role"}),rules:[{required:!0}],initialValue:"user",options:j.QQ})]})]})},I=V,z=e(29448),N=e(39380),C=e(90498),se=e(83622),de=e(96074),ue=e(86738),ce=e(83062),me=e(72269),ve=function(){var w=o.ZP.useMessage(),k=Z()(w,2),q=k[0],ne=k[1],m=(0,L.useIntl)(),Q=(0,h.useRef)(),oe=(0,h.useState)(!1),ee=Z()(oe,2),ae=ee[0],J=ee[1],x=(0,h.useRef)({}),Y=function(){var b=R()(d()().mark(function S(n,A){var M,v,F,T;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return M={id:n,status:A},y.next=3,(0,g.changeUserStatus)(M);case 3:v=y.sent,(v.code===200||v.msg==="success")&&(q.success(m.formatMessage({id:"common.message.text.edit.success"})),(F=Q.current)===null||F===void 0||(T=F.reloadAndRest)===null||T===void 0||T.call(F));case 5:case"end":return y.stop()}},S)}));return function(n,A){return b.apply(this,arguments)}}(),s=function(){var b=R()(d()().mark(function S(n){var A,M,v;return d()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,g.deleteUser)({userId:n});case 2:A=T.sent,(A.code===200||A.msg==="success")&&(q.success(m.formatMessage({id:"common.message.text.delete.success"})),(M=Q.current)===null||M===void 0||(v=M.reloadAndRest)===null||v===void 0||v.call(M));case 4:case"end":return T.stop()}},S)}));return function(n){return b.apply(this,arguments)}}(),te=[{title:m.formatMessage({id:"cloudAccount.extend.title.createAndUpdateTime"}),dataIndex:"gmtCreated",valueType:"text",align:"left",hideInSearch:!0,render:function(S,n){return(0,r.jsxs)("div",{children:[(0,r.jsx)("section",{style:{color:"#999"},children:(n==null?void 0:n.gmtCreate)||"-"}),(0,r.jsx)("section",{style:{color:"#999"},children:(n==null?void 0:n.gmtModified)||"-"})]})}},{title:m.formatMessage({id:"user.module.title.user.name"}),dataIndex:"username",valueType:"text",align:"center"},{title:m.formatMessage({id:"user.module.title.user.id"}),dataIndex:"userId",valueType:"text",align:"center"},{title:m.formatMessage({id:"user.module.title.user.role"}),dataIndex:"roleName",valueType:"select",hideInSearch:!0,align:"center",valueEnum:(0,z.W_)(j.QQ)},{title:m.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",render:function(S,n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(se.ZP,{size:"small",type:"link",onClick:function(){J(!0),x.current=l()({},n)},children:m.formatMessage({id:"common.button.text.edit"})}),(0,r.jsx)(de.Z,{type:"vertical"}),(0,r.jsx)(ue.Z,{title:m.formatMessage({id:"common.button.text.delete.confirm"}),onConfirm:function(){return s(n.userId)},okText:m.formatMessage({id:"common.button.text.ok"}),cancelText:m.formatMessage({id:"common.button.text.cancel"}),children:(0,r.jsx)(se.ZP,{type:"link",danger:!0,size:"small",children:m.formatMessage({id:"common.button.text.delete"})})}),(0,r.jsx)(de.Z,{type:"vertical",style:{margin:"0 12px 0 0"}}),(0,r.jsx)(ce.Z,{title:m.formatMessage({id:"user.module.title.user.status"}),children:(0,r.jsx)(me.Z,{checkedChildren:m.formatMessage({id:"common.button.text.normal"}),unCheckedChildren:m.formatMessage({id:"common.button.text.disable"}),checked:(n==null?void 0:n.status)==="valid",onClick:function(){return Y(n.id,(n==null?void 0:n.status)==="valid"?"invalid":"valid")}})})]})}}];return(0,r.jsxs)(N._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[ne,(0,r.jsx)(C.Z,{headerTitle:(0,r.jsx)("div",{className:U.Z.customTitle,children:m.formatMessage({id:"user.module.title.user.inquiry"})}),actionRef:Q,rowKey:"id",search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},toolBarRender:function(){return[(0,r.jsx)(se.ZP,{type:"primary",onClick:function(){x.current={},J(!0)},children:m.formatMessage({id:"user.extend.text.add"})},"create")]},request:function(){var b=R()(d()().mark(function S(n){var A,M,v,F,T,G,y,H;return d()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return A=n.username,M=n.userId,v=n.pageSize,F=n.current,T={username:A,userId:M,page:F,size:v},_.next=4,(0,g.queryUserList)(T);case 4:return G=_.sent,y=G.content,H=G.code,_.abrupt("return",{data:(y==null?void 0:y.data)||[],total:(y==null?void 0:y.total)||0,success:H===200||!1});case 8:case"end":return _.stop()}},S)}));return function(S){return b.apply(this,arguments)}}(),columns:te,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1}}),(0,r.jsx)(I,{editFormVisible:ae,setEditFormVisible:J,userInfo:x.current,tableActionRef:Q})]})},pe=ve},53846:function(K,B){"use strict";B.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}},64599:function(K,B,e){var a=e(96263);function l(i,d){var p=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!p){if(Array.isArray(i)||(p=a(i))||d&&i&&typeof i.length=="number"){p&&(i=p);var R=0,W=function(){};return{s:W,n:function(){return R>=i.length?{done:!0}:{done:!1,value:i[R++]}},e:function(g){throw g},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Z=!0,U=!1,f;return{s:function(){p=p.call(i)},n:function(){var g=p.next();return Z=g.done,g},e:function(g){U=!0,f=g},f:function(){try{!Z&&p.return!=null&&p.return()}finally{if(U)throw f}}}}K.exports=l,K.exports.__esModule=!0,K.exports.default=K.exports}}]);
