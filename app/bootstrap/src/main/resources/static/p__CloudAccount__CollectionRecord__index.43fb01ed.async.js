(self.webpackChunk=self.webpackChunk||[]).push([[4470],{52078:function(I,y,e){"use strict";var h=e(97857),_=e.n(h),E=e(27997),d=e(62435),O=e(86074),f=function(D){E.Mj.register({id:"json"});var U=D.value,a=U===void 0?"{}":U,j=D.onChange,A=D.editorStyle,K=A===void 0?{}:A,v=D.editorKey,g=v===void 0?"json-editor":v,c=D.readOnly,P=c===void 0?!1:c,T=(0,d.useRef)(),r=(0,d.useRef)(),k=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"{}";try{return JSON.parse(Z),Z}catch(F){return console.warn("Invalid JSON string:",F),"{}"}};return(0,d.useEffect)(function(){if(T.current)return r.current?r.current.setValue(a):(r.current=E.j6.create(T.current,{value:k(a),language:"json",theme:"vs",readOnly:P,folding:!0,automaticLayout:!0}),r.current.onDidChangeModelContent(function(){var R=r.current.getValue();console.log("[JSONEditor] \u7F16\u8F91\u5668\u5185\u5BB9\u53D8\u66F4:",{newValue:R}),j==null||j(R)})),function(){if(r!=null&&r.current){var R;r==null||(R=r.current)===null||R===void 0||R.dispose(),r.current=null}}},[]),(0,d.useEffect)(function(){r.current&&a!==r.current.getValue()&&r.current.setValue(k(a))},[a]),(0,O.jsx)("div",{ref:T,style:_()({height:360,borderRadius:4,overflow:"hidden"},K)},g)};y.Z=f},15260:function(I,y,e){"use strict";e.r(y);var h=e(52677),_=e.n(h),E=e(97857),d=e.n(E),O=e(15009),f=e.n(O),L=e(99289),D=e.n(L),U=e(5574),a=e.n(U),j=e(45830),A=e(39380),K=e(78253),v=e(99859),g=e(83062),c=e(42075),P=e(38703),T=e(66309),r=e(34041),k=e(83622),R=e(89094),Z=e(17788),F=e(45605),Se=e(8751),Oe=e(4340),Pe=e(11713),Re=e(27732),ye=e(52078),Ae=e(92635),X=e(29448),u=e(62435),Q=e(31272),Te=e(27484),q=e.n(Te),n=e(86074),be=K.default.RangePicker,Ie=function(){var Le=(0,j.useModel)("rule"),V=Le.platformList,Ue=v.Z.useForm(),xe=a()(Ue,1),We=xe[0],M=(0,j.useIntl)(),Be=(0,j.useSearchParams)(),Ke=a()(Be,1),J=Ke[0],ke=(0,u.useState)(!1),ee=a()(ke,2),Ve=ee[0],te=ee[1],Ze=(0,u.useState)([]),ne=a()(Ze,2),Fe=ne[0],re=ne[1],Ne=(0,u.useState)(0),se=a()(Ne,2),Je=se[0],ae=se[1],$e=(0,u.useState)([q()().subtract(1,"day"),q()().add(1,"day")]),oe=a()($e,2),x=oe[0],He=oe[1],Ye=(0,u.useState)(J.get("platform")||""),le=a()(Ye,2),S=le[0],ze=le[1],we=(0,u.useState)(""),ue=a()(we,2),W=ue[0],$=ue[1],Ge=(0,u.useState)([]),ie=a()(Ge,2),Xe=ie[0],_e=ie[1],Qe=(0,u.useState)([]),de=a()(Qe,2),qe=de[0],ce=de[1],et=(0,u.useState)(),me=a()(et,2),H=me[0],fe=me[1],tt=(0,u.useState)(!0),Ee=a()(tt,2),nt=Ee[0],rt=Ee[1],st=(0,u.useState)(!1),ve=a()(st,2),at=ve[0],he=ve[1],ot=(0,u.useState)(null),De=a()(ot,2),N=De[0],lt=De[1],ut=(0,u.useState)(!1),ge=a()(ut,2),b=ge[0],pe=ge[1],it=function(){pe(!b)},_t=function(){he(!1),pe(!1)},Y=function(){var o=D()(f()().mark(function t(i,m){var p,s,C;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i){l.next=3;break}return _e([]),l.abrupt("return");case 3:return l.prev=3,l.next=6,(0,Ae.cloudAccountBaseInfoListV2)({platformList:[i],cloudAccountSearch:m});case 6:p=l.sent,p.code===200&&(C=((s=p.content)===null||s===void 0?void 0:s.map(function(B){return{label:B.alias,value:B.cloudAccountId}}))||[],_e(C)),l.next=13;break;case 10:l.prev=10,l.t0=l.catch(3),console.error("Failed to obtain the list of cloud accounts:",l.t0);case 13:case"end":return l.stop()}},t,null,[[3,10]])}));return function(i,m){return o.apply(this,arguments)}}();(0,u.useEffect)(function(){S&&Y(S)},[S]),(0,u.useEffect)(function(){var o=J.get("platform"),t=J.get("cloudAccountId");o&&(Y(o),t&&$(t))},[]);var dt=(0,u.useState)(1),Me=a()(dt,2),z=Me[0],w=Me[1],ct=(0,u.useState)(10),Ce=a()(ct,2),G=Ce[0],mt=Ce[1],je=function(){var o=D()(f()().mark(function t(){var i,m;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(!W&&nt)){s.next=3;break}return rt(!1),s.abrupt("return");case 3:return te(!0),re([]),ae(0),s.prev=6,i={platform:S,cloudAccountId:W,errorCode:H,startTimeArray:x[0]&&x[1]?[x[0].format("YYYY-MM-DD HH:mm:ss"),x[1].format("YYYY-MM-DD HH:mm:ss")]:void 0,page:z,size:G},s.next=10,(0,Q.Yq)(i);case 10:m=s.sent,m.code===200&&(re(m.content.data),ae(m.content.total)),s.next=17;break;case 14:s.prev=14,s.t0=s.catch(6),console.error("Failed to obtain the collection record list:",s.t0);case 17:return s.prev=17,te(!1),s.finish(17);case 20:case"end":return s.stop()}},t,null,[[6,14,17,20]])}));return function(){return o.apply(this,arguments)}}(),ft=function(){var o=D()(f()().mark(function t(i,m){var p,s,C;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i){l.next=3;break}return ce([]),l.abrupt("return");case 3:return l.prev=3,l.next=6,(0,Q.XX)({platform:i,cloudAccountId:m});case 6:p=l.sent,p&&(C=(p==null||(s=p.content)===null||s===void 0?void 0:s.map(function(B){return{label:"".concat(B.description," (").concat(B.count,")"),value:B.description}}))||[],ce(C)),l.next=13;break;case 10:l.prev=10,l.t0=l.catch(3),console.error("Failed to obtain the list of error codes:",l.t0);case 13:case"end":return l.stop()}},t,null,[[3,10]])}));return function(i,m){return o.apply(this,arguments)}}();(0,u.useEffect)(function(){S&&ft(S,W)},[S,W]);var Et=function(){w(1),je()};(0,u.useEffect)(function(){je()},[z,G,S,W,H,x]);var vt=[{title:M.formatMessage({id:"cloudAccount.extend.title.cloud.platform"}),dataIndex:"platform",key:"platform",render:function(t){return(0,X.c5)(t,V)}},{title:M.formatMessage({id:"cloudAccount.extend.title.account.id"}),dataIndex:"cloudAccountId",key:"cloudAccountId",render:function(t,i){return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:t}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:i.alias})]})}},{title:M.formatMessage({id:"cloudAccount.table.column.collector.name"}),dataIndex:"collectorName",key:"collectorName",ellipsis:!0,render:function(t){return(0,n.jsx)(g.Z,{title:t,children:(0,n.jsx)("span",{children:t})})}},{title:M.formatMessage({id:"cloudAccount.table.column.start.time"}),dataIndex:"startTime",key:"startTime"},{title:M.formatMessage({id:"cloudAccount.table.column.end.time"}),dataIndex:"endTime",key:"endTime"},{title:"Metadata",dataIndex:"collectRecordInfo",key:"collectRecordInfo",width:200,render:function(t,i){var m=null;if(t)try{m=typeof t=="string"?JSON.parse(t):t}catch(s){console.warn("Failed to parse collectRecordInfo:",s),m=t}var p=function(){lt(m),he(!0)};return m?(0,n.jsx)("div",{style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",border:"1px solid #d9d9d9",backgroundColor:"#fafafa",transition:"all 0.3s"},onClick:p,onMouseEnter:function(C){C.currentTarget.style.backgroundColor="#e6f7ff",C.currentTarget.style.borderColor="#1890ff"},onMouseLeave:function(C){C.currentTarget.style.backgroundColor="#fafafa",C.currentTarget.style.borderColor="#d9d9d9"},children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(F.Z,{style:{color:"#1890ff"}}),(0,n.jsx)("span",{style:{color:"#1890ff",fontSize:"12px"},children:"View Details"})]})}):(0,n.jsx)("span",{style:{color:"#999"},children:"No metadata"})}},{title:M.formatMessage({id:"cloudAccount.table.column.status"}),dataIndex:"percent",key:"status",render:function(t,i){return t!==null&&t<100&&i.endTime==null?(0,n.jsx)(P.Z,{percent:t,size:"small",status:t===100?"success":"active",strokeColor:t===100?"#52c41a":"#1890ff"}):(0,n.jsx)(T.Z,{color:"success",icon:(0,n.jsx)(Se.Z,{}),children:"Completed"})}},{title:M.formatMessage({id:"cloudAccount.table.column.error.number"}),dataIndex:"errorResourceTypeList",key:"errorResourceTypeList",render:function(t,i){return(0,n.jsx)("a",{onClick:function(){j.history.push("/cloudAccount/collectionRecord/".concat(i.id))},children:(0,n.jsxs)(c.Z,{children:[(t==null?void 0:t.length)||0,(t==null?void 0:t.length)>0&&(0,n.jsx)(Oe.Z,{style:{color:"#ff4d4f"}})]})})}}];return(0,n.jsxs)(A._z,{title:M.formatMessage({id:"cloudAccount.title.collection.record"}),extra:(0,n.jsxs)(v.Z,{form:We,layout:"inline",children:[(0,n.jsx)(v.Z.Item,{children:(0,n.jsx)(r.Z,{style:{minWidth:200,maxWidth:"100%"},options:V==null?void 0:V.map(function(o){return d()(d()({},o),{},{label:(0,n.jsxs)(c.Z,{children:[(0,X.c5)(o.value,V),o.label]})})}),value:S,onChange:function(t){ze(t),$(""),w(1)}})}),(0,n.jsx)(v.Z.Item,{children:(0,n.jsx)(r.Z,{placeholder:M.formatMessage({id:"cloudAccount.extend.title.account.id"}),style:{width:200},value:W,onChange:function(t){$(t),fe("")},options:Xe,allowClear:!0,showSearch:!0,filterOption:!1,onSearch:function(t){Y(S,t)}})}),(0,n.jsx)(v.Z.Item,{children:(0,n.jsx)(r.Z,{placeholder:M.formatMessage({id:"cloudAccount.table.column.error.number"}),style:{width:200},value:H,onChange:function(t){return fe(t)},options:qe,allowClear:!0})}),(0,n.jsx)(v.Z.Item,{children:(0,n.jsx)(be,{showTime:!0,value:x,onChange:function(t){return He(t)}})}),(0,n.jsx)(v.Z.Item,{children:(0,n.jsx)(k.ZP,{type:"primary",onClick:Et,children:M.formatMessage({id:"common.button.text.query"})})})]}),children:[(0,n.jsx)(R.Z,{columns:vt,dataSource:Fe,rowKey:"id",loading:Ve,scroll:{x:"max-content"},pagination:{current:z,pageSize:G,total:Je,showSizeChanger:!0,showQuickJumper:!0,onChange:function(t,i){w(t),mt(i)}}}),(0,n.jsxs)(Z.Z,{title:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(F.Z,{style:{color:"#1890ff"}}),(0,n.jsx)("span",{children:"Metadata Details"})]}),open:at,onCancel:_t,footer:[(0,n.jsx)(k.ZP,{icon:b?(0,n.jsx)(Pe.Z,{}):(0,n.jsx)(Re.Z,{}),onClick:it,children:b?"Exit Fullscreen":"Fullscreen"},"fullscreen")],width:b?"100vw":800,style:b?{top:0,paddingBottom:0,maxWidth:"100vw"}:{},bodyStyle:b?{height:"calc(100vh - 110px)",padding:"24px"}:{},children:["         ",(0,n.jsx)(ye.Z,{value:N?_()(N)==="object"?JSON.stringify(N,null,2):N:"{}",readOnly:!0,editorStyle:{height:b?"calc(100vh - 200px)":"60vh",border:"1px solid #e1e4e8",borderRadius:"6px"}})]})]})};y.default=Ie},31272:function(I,y,e){"use strict";e.d(y,{XX:function(){return K},Yq:function(){return U},xd:function(){return j}});var h=e(15009),_=e.n(h),E=e(97857),d=e.n(E),O=e(99289),f=e.n(O),L=e(40396),D=e(45830);function U(g,c){return a.apply(this,arguments)}function a(){return a=f()(_()().mark(function g(c,P){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,D.request)("".concat(L._,"/api/cloudAccount/collectorRecord/getCollectorRecordList"),d()({method:"POST",headers:{"Content-Type":"application/json"},data:c},P||{})));case 1:case"end":return r.stop()}},g)})),a.apply(this,arguments)}function j(g,c){return A.apply(this,arguments)}function A(){return A=f()(_()().mark(function g(c,P){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,D.request)("".concat(L._,"/api/cloudAccount/collectorRecord/getCollectorRecordDetail"),d()({method:"POST",headers:{"Content-Type":"application/json"},data:c},P||{})));case 1:case"end":return r.stop()}},g)})),A.apply(this,arguments)}function K(g,c){return v.apply(this,arguments)}function v(){return v=f()(_()().mark(function g(c,P){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,D.request)("".concat(L._,"/api/cloudAccount/collectorRecord/getErrorCodeList"),d()({method:"POST",headers:{"Content-Type":"application/json"},data:c},P||{})));case 1:case"end":return r.stop()}},g)})),v.apply(this,arguments)}},85674:function(I,y,e){var h={"./simpleWorker":18352,"./simpleWorker.js":18352};function _(E){return Promise.resolve().then(function(){if(!e.o(h,E)){var d=new Error("Cannot find module '"+E+"'");throw d.code="MODULE_NOT_FOUND",d}var O=h[E];return e(O)})}_.keys=function(){return Object.keys(h)},_.id=85674,I.exports=_},10131:function(I,y,e){var h={"./editorBaseApi":[20927],"./editorBaseApi.js":[20927],"./editorSimpleWorker":[81465],"./editorSimpleWorker.js":[81465],"./editorWorker":[85215],"./editorWorker.js":[85215],"./editorWorkerHost":[98008],"./editorWorkerHost.js":[98008],"./findSectionHeaders":[72846],"./findSectionHeaders.js":[72846],"./getIconClasses":[22016],"./getIconClasses.js":[22016],"./languageFeatureDebounce":[88191],"./languageFeatureDebounce.js":[88191],"./languageFeatures":[71922],"./languageFeatures.js":[71922],"./languageFeaturesService":[7421],"./languageFeaturesService.js":[7421],"./languageService":[81032],"./languageService.js":[81032],"./languagesAssociations":[73536],"./languagesAssociations.js":[73536],"./languagesRegistry":[4765],"./languagesRegistry.js":[4765],"./markerDecorations":[36357],"./markerDecorations.js":[36357],"./markerDecorationsService":[86036],"./markerDecorationsService.js":[86036],"./model":[73733],"./model.js":[73733],"./modelService":[51200],"./modelService.js":[51200],"./resolverService":[88216],"./resolverService.js":[88216],"./semanticTokensDto":[14704],"./semanticTokensDto.js":[14704],"./semanticTokensProviderStyling":[92294],"./semanticTokensProviderStyling.js":[92294],"./semanticTokensStyling":[73343],"./semanticTokensStyling.js":[73343],"./semanticTokensStylingService":[84146],"./semanticTokensStylingService.js":[84146],"./textModelSync/textModelSync.impl":[28944],"./textModelSync/textModelSync.impl.js":[28944],"./textModelSync/textModelSync.protocol":[23145,3145],"./textModelSync/textModelSync.protocol.js":[23145,3145],"./textResourceConfiguration":[71765],"./textResourceConfiguration.js":[71765],"./treeSitterParserService":[28922],"./treeSitterParserService.js":[28922],"./treeViewsDnd":[80642],"./treeViewsDnd.js":[80642],"./treeViewsDndService":[58345],"./treeViewsDndService.js":[58345],"./unicodeTextModelHighlighter":[31446],"./unicodeTextModelHighlighter.js":[31446]};function _(E){if(!e.o(h,E))return Promise.resolve().then(function(){var f=new Error("Cannot find module '"+E+"'");throw f.code="MODULE_NOT_FOUND",f});var d=h[E],O=d[0];return Promise.all(d.slice(1).map(e.e)).then(function(){return e(O)})}_.keys=function(){return Object.keys(h)},_.id=10131,I.exports=_}}]);
