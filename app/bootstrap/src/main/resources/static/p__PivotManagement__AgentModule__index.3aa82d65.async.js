(self.webpackChunk=self.webpackChunk||[]).push([[7759],{69055:function(I,g,e){"use strict";e.d(g,{Z:function(){return z}});var E=e(22181),u=e(83622),s=e(87462),i=e(62435),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},m=l,x=e(84089),r=function(T,C){return i.createElement(x.Z,(0,s.Z)({},T,{ref:C,icon:m}))},f=i.forwardRef(r),M=f,o=e(92016),d={noPermissionContainer:"noPermissionContainer___mfh3D","ant-result":"ant-result___HwWPh","ant-result-icon":"ant-result-icon___kCRak",anticon:"anticon___dFq4q","ant-result-title":"ant-result-title___qzgxn","ant-result-subtitle":"ant-result-subtitle___wgaK1","ant-result-extra":"ant-result-extra___YuiiI","ant-btn":"ant-btn___SR44Y",dark:"dark___6IwTX",fadeInUp:"fadeInUp___lq2_S"},h=e(86074),k=function(T){var C=T.title,S=T.subTitle,t=T.showReturnButton,B=t===void 0?!0:t,W=T.onReturn,A=(0,o.useIntl)(),O=function(){W?W():o.history===null||o.history===void 0||o.history.push("/")};return(0,h.jsx)("div",{className:d.noPermissionContainer,children:(0,h.jsx)(E.ZP,{icon:(0,h.jsx)(M,{}),status:"403",title:C||A.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:S||A.formatMessage({id:"common.message.text.no.permission.subtitle"}),extra:B&&(0,h.jsx)(u.ZP,{type:"primary",onClick:O,children:A.formatMessage({id:"common.button.text.return"})})})})},z=k},82043:function(I,g,e){"use strict";var E=e(62435),u=e(92016),s=e(69055),i=e(86074),l=function(x){var r=x.children,f=x.accessKey,M=x.fallback,o=(0,u.useAccess)(),d=(0,u.useIntl)();if(!f)return(0,i.jsx)(i.Fragment,{children:r});var h=o[f];return h?(0,i.jsx)(i.Fragment,{children:r}):(0,i.jsx)(i.Fragment,{children:M||(0,i.jsx)(s.Z,{title:d.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:d.formatMessage({id:"common.message.text.no.permission.subtitle"})})})};g.Z=l},24163:function(I,g,e){"use strict";var E=e(97857),u=e.n(E),s=e(25593),i=e(83062),l=e(62435),m=e(86074),x=s.Z.Paragraph;g.Z=function(r){var f=r.text,M=r.width,o=r.maxWidth,d=r.rows,h=d===void 0?2:d,k=r.placement,z=k===void 0?"top":k,Z=r.color,T=Z===void 0?"rgba(0, 0, 0, 0.88)":Z,C=r.link,S=C===void 0?!1:C,t=r.onClickCallBackFunc,B=r.style,W=B===void 0?{}:B,A=r.copyable,O=A===void 0?!1:A;return(0,m.jsx)("div",{style:{maxWidth:o,width:M},children:(0,m.jsx)(i.Z,{title:(0,m.jsx)("div",{children:f}),placement:z,children:(0,m.jsx)(x,{ellipsis:{rows:h},style:u()({marginBottom:0,color:T,cursor:S?"pointer":""},W),onClick:t,copyable:O,children:f})})})}},64959:function(I,g,e){"use strict";e.r(g),e.d(g,{default:function(){return ne}});var E=e(15009),u=e.n(E),s=e(99289),i=e.n(s),l=e(5574),m=e.n(l),x=e(53846),r=e(82043),f=e(24163),M=e(45605),o=e(92016),d=e(17788),h=e(83062),k=e(2487),z=e(71230),Z=e(15746),T=e(21987),C=e(62435),S={toolTipWrap:"toolTipWrap___RxSDA",tooltipIcon:"tooltipIcon___lORng"},t=e(86074),B=function(){var p=(0,o.useIntl)();return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:p.formatMessage({id:"collector.extend.text.token.tip1"})}),(0,t.jsxs)("div",{children:[p.formatMessage({id:"collector.extend.text.token.tip2"}),(0,t.jsx)("div",{children:p.formatMessage({id:"collector.extend.text.token.tip3"})}),(0,t.jsx)("div",{children:p.formatMessage({id:"collector.extend.text.token.tip4"})})]})]})},W=function(p){var _=p.visible,N=p.onClose,c=p.tokenInfo,w=(0,o.useIntl)();return(0,t.jsxs)(d.Z,{width:740,style:{top:120},title:w.formatMessage({id:"collector.extend.text.token.information"}),open:_,onCancel:N,footer:null,children:[(0,t.jsxs)("p",{children:["Token",(0,t.jsx)(h.Z,{overlayClassName:S.toolTipWrap,placement:"top",title:(0,t.jsx)(B,{}),children:(0,t.jsx)(M.Z,{className:S.tooltipIcon})}),":",c!=null&&c.token?(0,t.jsx)(T.Z,{copyable:!0,children:c.token}):"-"]}),(0,t.jsx)("p",{children:(0,t.jsx)(k.Z,{bordered:!0,dataSource:(c==null?void 0:c.tokenList)||[],renderItem:function(P){return(0,t.jsx)(k.Z.Item,{children:(0,t.jsxs)(z.Z,{gutter:[24,0],style:{width:"100%"},children:[(0,t.jsx)(Z.Z,{span:4,children:(0,t.jsx)(f.Z,{text:(P==null?void 0:P.platformName)||"-",rows:1,placement:"topLeft"})}),(0,t.jsx)(Z.Z,{span:20,children:(0,t.jsx)(f.Z,{text:(P==null?void 0:P.script)||"-",rows:1,placement:"topLeft",copyable:!0})})]})})}})}),(0,t.jsxs)("p",{children:[w.formatMessage({id:"collector.extend.text.expiration.date"}),"\xA0:\xA0",(c==null?void 0:c.expireTime)||"-"]}),(0,t.jsxs)("p",{children:[w.formatMessage({id:"rule.input.text.rule.group.creator"}),"\xA0:\xA0",(c==null?void 0:c.username)||"-"]})]})},A=W,O=e(97470),G=e(29448),Y=e(39380),Q=e(90498),X=e(68872),q=e(86738),$=e(83622),ee=function(){var p=(0,C.useRef)(),_=(0,C.useState)(!1),N=m()(_,2),c=N[0],w=N[1],H=(0,C.useState)({token:"",expireTime:"",username:"",script:"",tokenList:[]}),P=m()(H,2),re=P[0],oe=P[1],ae=X.ZP.useMessage(),se=m()(ae,1),ie=se[0],a=(0,o.useIntl)(),le=function(){var j=i()(u()().mark(function y(n){var R,v,L;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,O.exitAgent)({onceToken:n});case 2:R=b.sent,(R.code===200||R.msg==="success")&&(ie.success(a.formatMessage({id:"common.message.text.exit.success"})),(v=p.current)===null||v===void 0||(L=v.reloadAndRest)===null||L===void 0||L.call(v));case 4:case"end":return b.stop()}},y)}));return function(n){return j.apply(this,arguments)}}(),de=[{title:a.formatMessage({id:"collector.module.text.agent.name"}),dataIndex:"agentName",valueType:"text",align:"center",width:240},{title:a.formatMessage({id:"common.table.columns.platform"}),dataIndex:"platform",valueType:"text",align:"center",hideInSearch:!0,width:200,render:function(y,n){return(0,G.BD)(n.platform)}},{title:a.formatMessage({id:"collector.module.text.registry.value"}),dataIndex:"registryValue",valueType:"text",align:"left",width:200},{title:a.formatMessage({id:"collector.module.text.registry.time"}),dataIndex:"registryTime",valueType:"dateTime",hideInSearch:!0,align:"left",width:200},{title:"Cron",dataIndex:"cron",hideInSearch:!0,align:"left",width:100},{title:a.formatMessage({id:"collector.module.text.registry.user"}),dataIndex:"username",hideInSearch:!0,align:"left",width:120},{title:a.formatMessage({id:"collector.module.text.registry.Information"}),dataIndex:"healthStatus",hideInSearch:!0,align:"left",width:220},{title:a.formatMessage({id:"collector.module.text.registry.status"}),dataIndex:"status",hideInSearch:!0,align:"left",width:120,render:function(y,n){return(0,t.jsx)(h.Z,{title:n.status==="valid"?a.formatMessage({id:"collector.module.text.status.health"}):n.status==="invalid"?a.formatMessage({id:"collector.module.text.status.offline"}):a.formatMessage({id:"collector.module.text.status.abnormal"}),children:(0,t.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:n.status==="valid"?"rgb(17, 133, 86)":n.status==="invalid"?"rgb(288, 43, 53)":"rgb(253, 100, 8)"}})})}},{title:a.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",width:120,render:function(y,n){return(0,t.jsx)(q.Z,{title:a.formatMessage({id:"collector.module.text.interrupt.process"}),onConfirm:function(){return le(n.onceToken)},okText:a.formatMessage({id:"common.button.text.ok"}),cancelText:a.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)($.ZP,{type:"link",danger:!0,children:a.formatMessage({id:"collector.module.text.interrupt.process"})})})}}],ue=function(){var j=i()(u()().mark(function y(){var n;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,O.getOnceToken)();case 2:n=v.sent,n.code===200&&(oe({token:n.content.token,expireTime:n.content.expireTime,username:n.content.username,script:n.content.script,tokenList:n.content.tokenList}),w(!0));case 4:case"end":return v.stop()}},y)}));return function(){return j.apply(this,arguments)}}();return(0,t.jsxs)(Y._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[(0,t.jsx)(Q.Z,{headerTitle:(0,t.jsx)("div",{className:x.Z.customTitle,children:a.formatMessage({id:"collector.module.text.collector.inquiry"})}),actionRef:p,rowKey:"id",search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},options:!1,request:function(){var j=i()(u()().mark(function y(n){var R,v,L,V,b,F,D,J;return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return R=n.agentName,v=n.registryValue,L=n.current,V=n.pageSize,b={agentName:R,registryValue:v,page:L,size:V},K.next=4,(0,O.queryAgentList)(b);case 4:return F=K.sent,D=F.content,J=F.code,K.abrupt("return",{data:(D==null?void 0:D.data)||[],total:(D==null?void 0:D.total)||0,success:J===200||!1});case 8:case"end":return K.stop()}},y)}));return function(y){return j.apply(this,arguments)}}(),columns:de,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},toolBarRender:function(){return[(0,t.jsx)($.ZP,{type:"primary",onClick:ue,children:a.formatMessage({id:"common.button.text.deploy"})},"getToken"),(0,t.jsx)($.ZP,{href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/ztfuupzril8i28tl",target:"_blank",style:{border:"1px solid #457aff",color:"#457aff",padding:"4px 10px",backgroundColor:"transparent"},children:a.formatMessage({id:"collector.extend.text.config"})},"config")]}}),(0,t.jsx)(A,{visible:c,onClose:function(){return w(!1)},tokenInfo:re})]})},te=function(){return(0,t.jsx)(r.Z,{accessKey:"isPlatformAdmin",children:(0,t.jsx)(ee,{})})},ne=te},53846:function(I,g){"use strict";g.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}},64599:function(I,g,e){var E=e(96263);function u(s,i){var l=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!l){if(Array.isArray(s)||(l=E(s))||i&&s&&typeof s.length=="number"){l&&(s=l);var m=0,x=function(){};return{s:x,n:function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}},e:function(d){throw d},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,f=!1,M;return{s:function(){l=l.call(s)},n:function(){var d=l.next();return r=d.done,d},e:function(d){f=!0,M=d},f:function(){try{!r&&l.return!=null&&l.return()}finally{if(f)throw M}}}}I.exports=u,I.exports.__esModule=!0,I.exports.default=I.exports}}]);
