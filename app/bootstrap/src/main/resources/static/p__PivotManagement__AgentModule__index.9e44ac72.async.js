"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7759],{24163:function(U,x,e){var D=e(97857),u=e.n(D),O=e(25593),y=e(83062),V=e(62435),m=e(86074),L=O.Z.Paragraph;x.Z=function(r){var A=r.text,j=r.width,w=r.maxWidth,C=r.rows,Z=C===void 0?2:C,P=r.placement,R=P===void 0?"top":P,E=r.color,k=E===void 0?"rgba(0, 0, 0, 0.88)":E,I=r.link,t=I===void 0?!1:I,$=r.onClickCallBackFunc,S=r.style,B=S===void 0?{}:S,p=r.copyable,W=p===void 0?!1:p;return(0,m.jsx)("div",{style:{maxWidth:w,width:j},children:(0,m.jsx)(y.Z,{title:(0,m.jsx)("div",{children:A}),placement:R,children:(0,m.jsx)(L,{ellipsis:{rows:Z},style:u()({marginBottom:0,color:k,cursor:t?"pointer":""},B),onClick:$,copyable:W,children:A})})})}},64959:function(U,x,e){e.r(x),e.d(x,{default:function(){return ee}});var D=e(15009),u=e.n(D),O=e(99289),y=e.n(O),V=e(5574),m=e.n(V),L=e(53846),r=e(24163),A=e(45605),j=e(92016),w=e(17788),C=e(83062),Z=e(2487),P=e(71230),R=e(15746),E=e(21987),k=e(62435),I={toolTipWrap:"toolTipWrap___RxSDA",tooltipIcon:"tooltipIcon___lORng"},t=e(86074),$=function(){var s=(0,j.useIntl)();return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:s.formatMessage({id:"collector.extend.text.token.tip1"})}),(0,t.jsxs)("div",{children:[s.formatMessage({id:"collector.extend.text.token.tip2"}),(0,t.jsx)("div",{children:s.formatMessage({id:"collector.extend.text.token.tip3"})}),(0,t.jsx)("div",{children:s.formatMessage({id:"collector.extend.text.token.tip4"})})]})]})},S=function(s){var N=s.visible,b=s.onClose,a=s.tokenInfo,h=(0,j.useIntl)();return(0,t.jsxs)(w.Z,{width:740,style:{top:120},title:h.formatMessage({id:"collector.extend.text.token.information"}),open:N,onCancel:b,footer:null,children:[(0,t.jsxs)("p",{children:["Token",(0,t.jsx)(C.Z,{overlayClassName:I.toolTipWrap,placement:"top",title:(0,t.jsx)($,{}),children:(0,t.jsx)(A.Z,{className:I.tooltipIcon})}),":",a!=null&&a.token?(0,t.jsx)(E.Z,{copyable:!0,children:a.token}):"-"]}),(0,t.jsx)("p",{children:(0,t.jsx)(Z.Z,{bordered:!0,dataSource:(a==null?void 0:a.tokenList)||[],renderItem:function(c){return(0,t.jsx)(Z.Z.Item,{children:(0,t.jsxs)(P.Z,{gutter:[24,0],style:{width:"100%"},children:[(0,t.jsx)(R.Z,{span:4,children:(0,t.jsx)(r.Z,{text:(c==null?void 0:c.platformName)||"-",rows:1,placement:"topLeft"})}),(0,t.jsx)(R.Z,{span:20,children:(0,t.jsx)(r.Z,{text:(c==null?void 0:c.script)||"-",rows:1,placement:"topLeft",copyable:!0})})]})})}})}),(0,t.jsxs)("p",{children:[h.formatMessage({id:"collector.extend.text.expiration.date"}),"\xA0:\xA0",(a==null?void 0:a.expireTime)||"-"]}),(0,t.jsxs)("p",{children:[h.formatMessage({id:"rule.input.text.rule.group.creator"}),"\xA0:\xA0",(a==null?void 0:a.username)||"-"]})]})},B=S,p=e(97470),W=e(29448),Q=e(39380),X=e(28189),Y=e(68872),_=e(86738),z=e(83622),q=function(){var s=(0,k.useRef)(),N=(0,k.useState)(!1),b=m()(N,2),a=b[0],h=b[1],F=(0,k.useState)({token:"",expireTime:"",username:"",script:"",tokenList:[]}),c=m()(F,2),te=c[0],ne=c[1],oe=Y.ZP.useMessage(),ae=m()(oe,1),re=ae[0],o=(0,j.useIntl)(),le=function(){var d=y()(u()().mark(function i(n){var g,l,T;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,p.exitAgent)({onceToken:n});case 2:g=v.sent,(g.code===200||g.msg==="success")&&(re.success(o.formatMessage({id:"common.message.text.exit.success"})),(l=s.current)===null||l===void 0||(T=l.reloadAndRest)===null||T===void 0||T.call(l));case 4:case"end":return v.stop()}},i)}));return function(n){return d.apply(this,arguments)}}(),se=[{title:o.formatMessage({id:"collector.module.text.agent.name"}),dataIndex:"agentName",valueType:"text",align:"center",width:240},{title:o.formatMessage({id:"common.table.columns.platform"}),dataIndex:"platform",valueType:"text",align:"center",hideInSearch:!0,width:200,render:function(i,n){return(0,W.BD)(n.platform)}},{title:o.formatMessage({id:"collector.module.text.registry.value"}),dataIndex:"registryValue",valueType:"text",align:"left",width:200},{title:o.formatMessage({id:"collector.module.text.registry.time"}),dataIndex:"registryTime",valueType:"dateTime",hideInSearch:!0,align:"left",width:200},{title:"Cron",dataIndex:"cron",hideInSearch:!0,align:"left",width:100},{title:o.formatMessage({id:"collector.module.text.registry.user"}),dataIndex:"username",hideInSearch:!0,align:"left",width:120},{title:o.formatMessage({id:"collector.module.text.registry.status"}),dataIndex:"status",hideInSearch:!0,align:"left",width:120,render:function(i,n){return(0,t.jsx)(C.Z,{title:n.status==="valid"?o.formatMessage({id:"collector.module.text.status.health"}):n.status==="invalid"?o.formatMessage({id:"collector.module.text.status.offline"}):o.formatMessage({id:"collector.module.text.status.abnormal"}),children:(0,t.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:n.status==="valid"?"rgb(17, 133, 86)":n.status==="invalid"?"rgb(288, 43, 53)":"rgb(253, 100, 8)"}})})}},{title:o.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",width:120,render:function(i,n){return(0,t.jsx)(_.Z,{title:o.formatMessage({id:"collector.module.text.interrupt.process"}),onConfirm:function(){return le(n.onceToken)},okText:o.formatMessage({id:"common.button.text.ok"}),cancelText:o.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)(z.ZP,{type:"link",danger:!0,children:o.formatMessage({id:"collector.module.text.interrupt.process"})})})}}],ie=function(){var d=y()(u()().mark(function i(){var n;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,p.getOnceToken)();case 2:n=l.sent,n.code===200&&(ne({token:n.content.token,expireTime:n.content.expireTime,username:n.content.username,script:n.content.script,tokenList:n.content.tokenList}),h(!0));case 4:case"end":return l.stop()}},i)}));return function(){return d.apply(this,arguments)}}();return(0,t.jsxs)(Q._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[(0,t.jsx)(X.Z,{headerTitle:(0,t.jsx)("div",{className:L.Z.customTitle,children:o.formatMessage({id:"collector.module.text.collector.inquiry"})}),actionRef:s,rowKey:"id",search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},options:!1,request:function(){var d=y()(u()().mark(function i(n){var g,l,T,G,v,K,f,H;return u()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return g=n.agentName,l=n.registryValue,T=n.current,G=n.pageSize,v={agentName:g,registryValue:l,page:T,size:G},M.next=4,(0,p.queryAgentList)(v);case 4:return K=M.sent,f=K.content,H=K.code,M.abrupt("return",{data:(f==null?void 0:f.data)||[],total:(f==null?void 0:f.total)||0,success:H===200||!1});case 8:case"end":return M.stop()}},i)}));return function(i){return d.apply(this,arguments)}}(),columns:se,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},toolBarRender:function(){return[(0,t.jsx)(z.ZP,{type:"primary",onClick:ie,children:o.formatMessage({id:"common.button.text.deploy"})},"getToken"),(0,t.jsx)(z.ZP,{href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/ztfuupzril8i28tl",target:"_blank",style:{border:"1px solid #457aff",color:"#457aff",padding:"4px 10px",backgroundColor:"transparent"},children:o.formatMessage({id:"collector.extend.text.config"})},"config")]}}),(0,t.jsx)(B,{visible:a,onClose:function(){return h(!1)},tokenInfo:te})]})},ee=q},53846:function(U,x){x.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}}}]);
